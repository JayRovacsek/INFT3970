@model IEnumerable<INFT3970Project.Models.Database_Entities.TemperatureModel>

@{ var temperatures = Model.Select(x => x.Temp).ToArray();}

@{
    Layout = "~/Views/Shared/_AuthenticatedLayout.cshtml";
}

<div style="width:100%;">
    <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
        <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
            <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
        </div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div>
    </div>
    <canvas id="chart" class="chartjs-render-monitor col-md-12 col-xs-12" style="display: block;"></canvas>
</div>

<script src="~/lib/momentjs/momentjs.js"></script>
<script src="~/lib/chartjs/chart-min.js"></script>

<script>
    var array = @Html.Raw(Json.Serialize(temperatures));

    var ctx = document.getElementById("chart");
    var chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['1am', '2am', '3am', '4am', '5am', '6am', '7am', '8am', '9am', '10am', '11am', '12pm', '1pm', '2pm', '3pm', '4pm', '5pm', '6pm', '7pm', '8pm', '9pm', '10pm', '11pm', '12am'],
            datasets: [{
                label: 'My First dataset',
                data: array,
                backgroundColor: [ 'rgba(255, 99, 132, 0.2)'],
                borderColor: ['rgba(255,99,132,1)'],
                borderWidth: 1
            }, {
                label: 'My Second dataset',
                fill: false,
                    backgroundColor: ['rgba(54, 162, 235, 0.2)'],
                    borderColor: ['rgba(54, 162, 235, 1)'],
                data: [2, 9, 13, 15, 22, 3],
            }]
        },

        options: {
            responsive: true,
            title: {
                display: true,
                text: 'Chart.js Line Chart'
            },
            tooltips: {
                mode: 'index',
                intersect: false,
            },
            hover: {
                mode: 'nearest',
                intersect: true
            },
            scales: {
                xAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Time'
                    }
                }],
                yAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Temp'
                    }
                }]
            }
        }
    });
</script>

@*<table class="table">
    <thead class="thead-light">

        <tr>
            <th scope="col">#</th>
            <th scope="col">Motion</th>
            <th scope="col">Date</th>
        </tr>
    </thead>
    <tbody>
        @{
            foreach (var item in Model)
            {
                <tr>
                    <th scope="row">@item.TempId</th>
                    <td>
                        @item.Temp &deg;C
                    </td>
                    <td>
                        @item.Date
                    </td>
                </tr>
            }
        }
    </tbody>
</table>*@
